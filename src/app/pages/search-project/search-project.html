<mat-toolbar>
    <div class="header">
        <div class="header_left">
            <button matIconButton (click)="sidenav.toggle()">
                <mat-icon>menu</mat-icon>
            </button>
            <span>MatchApp</span>
        </div>
        <div class="header_middle">
            <mat-form-field appearance="outline" class="filter" class="browser">
                    <mat-label>Buscar proyecto...</mat-label>
                    <input matInput (keyup.enter)="onSearchEnter()" [(ngModel)]="searchBarText" />
                    <mat-icon matSuffix>search</mat-icon>
            </mat-form-field>
        </div>
        <div class="header_right">
            <button mat-button type="button" (click)="loadUserProject()" class="add_project">
                Ver mis proyectos
            </button>
            <button mat-button type="button" (click)="openAddProjectModal()" class="add_project">
                Nuevo proyecto
                <mat-icon matSuffix>add</mat-icon>
            </button>
            <button mat-icon-button (click)="goToProfile()" class="profile">
                <img [src]="userPhotoUrl" alt="Foto" class="profile_picture"/>
            </button>
        </div>
    </div>
</mat-toolbar>
    
<mat-sidenav-container class="container">
    <mat-sidenav #sidenav mode="side" class="side">
        <form [formGroup]="form">
            <mat-form-field appearance="fill" class="filter">
                <mat-label>Título</mat-label>
                <input matInput formControlName="title" placeholder="Titulo"/>
            </mat-form-field>

            <mat-form-field appearance="fill" class="filter">
                <mat-label>Descripción</mat-label>
                <input matInput formControlName="description" placeholder="Descripcion"/>
            </mat-form-field>

            <mat-form-field appearance="fill" class="filter">
                <mat-label>Categoría</mat-label>
                <mat-select formControlName="idCategory">
                    @for (category of categories; track category) {
                        <mat-option [value]="category.id">{{category.name}}</mat-option>
                    }
                </mat-select>
            </mat-form-field>

            <mat-form-field appearance="fill" class="filter">
                <mat-label>Usuario</mat-label>
                <input matInput formControlName="user" placeholder="Usuario"/>
            </mat-form-field>

            <mat-slide-toggle formControlName="date" appearance="fill" class="filter">Ordenar por fecha</mat-slide-toggle>

            <button mat-button type="button" (click)="onSearchClick()">Buscar</button>
        </form>
    </mat-sidenav>
    
    <mat-sidenav-content class="main">
        <div class="projects-list">
            @if(showProjects()){
                @for(project of projects; track $index) {
                    <app-project-card [project]="project" [loading]="loading()" (reload)="onProjectDelete($event)"></app-project-card>
                }
            }
        </div>
    </mat-sidenav-content>
</mat-sidenav-container>
